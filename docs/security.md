# 12. 보안 (Security)

---

## 1. 암호화 (Encryption) ◑

### 대칭키 vs 비대칭키

| 구분 | 대칭키 | 비대칭키 |
|------|--------|----------|
| 키 | 암호화/복호화 동일 키 | 공개키/개인키 쌍 |
| 속도 | 빠름 | 느림 |
| 키 배포 | 어려움 | 용이 (공개키 공유) |
| 용도 | 대량 데이터 암호화 | 키 교환, 인증, 전자서명 |
| 예시 | AES, DES, 3DES | RSA, ECC, DSA |

### ⭕ 대칭키와 비대칭키 암호화의 차이는?

**대칭키 암호화**
- 하나의 키로 암호화/복호화
- 속도가 빠름 (대용량 데이터에 적합)
- 키 배포 문제: 키를 안전하게 공유해야 함

**비대칭키 암호화**
- 공개키로 암호화, 개인키로 복호화 (또는 반대)
- 속도가 느림
- 키 배포 용이: 공개키는 누구에게나 공개 가능

### 하이브리드 암호화 ◑

실제 시스템에서는 두 방식을 조합하여 사용한다.

1. 비대칭키(RSA)로 대칭키(AES)를 안전하게 교환
2. 교환된 대칭키(AES)로 실제 데이터 암호화

**활용 예시**: TLS/SSL (HTTPS)

### AES (Advanced Encryption Standard) ◑

| 특징 | 설명 |
|------|------|
| 종류 | 대칭키 블록 암호 |
| 블록 크기 | 128비트 |
| 키 길이 | 128, 192, 256비트 |
| 용도 | 파일 암호화, VPN, 저장 데이터 보호 |

- AES-256은 미국 NSA에서 Top Secret 정보 보호에 승인

### RSA ◑

| 특징 | 설명 |
|------|------|
| 종류 | 비대칭키 암호 |
| 원리 | 큰 소수의 곱셈은 쉽지만, 인수분해는 어려움 |
| 키 길이 | 2048, 3072, 4096비트 |
| 용도 | 전자서명, SSL/TLS, 이메일 암호화 |

---

## 2. 해시 함수 ◑

입력 데이터를 고정 길이의 해시값으로 변환하는 **단방향 함수**이다.

### 해시 함수 특징 ◑

| 특징 | 설명 |
|------|------|
| 단방향성 | 해시값에서 원본 복원 불가 |
| 결정성 | 같은 입력 → 항상 같은 출력 |
| 충돌 저항성 | 다른 입력 → 다른 해시값 (이상적) |
| 고정 길이 | 입력 크기와 무관하게 동일한 출력 길이 |

### 해시 알고리즘 ◑

| 알고리즘 | 출력 길이 | 보안성 |
|----------|----------|--------|
| MD5 | 128비트 | 취약 (사용 금지) |
| SHA-1 | 160비트 | 취약 (사용 금지) |
| SHA-256 | 256비트 | 안전 |
| SHA-3 | 가변 | 안전 |
| bcrypt | 가변 | 비밀번호용 |

### ⭕ 암호화와 해시의 차이는?

| 구분 | 암호화 | 해시 |
|------|--------|------|
| 방향성 | 양방향 (복호화 가능) | 단방향 (복원 불가) |
| 용도 | 데이터 기밀성 보호 | 무결성 검증, 비밀번호 저장 |
| 질문 | "나중에 원본이 필요한가?" | Yes → 암호화 / No → 해시 |

**비밀번호 저장**: 해시 사용 (bcrypt, Argon2)
- 서버는 원본 비밀번호가 필요 없음
- 로그인 시 입력값을 해시하여 저장된 해시와 비교

---

## 3. 인증과 인가 ◑

### ⭕ 인증(Authentication)과 인가(Authorization)의 차이는?

| 구분 | 인증 (Authentication) | 인가 (Authorization) |
|------|----------------------|---------------------|
| 질문 | "너는 누구인가?" | "너는 무엇을 할 수 있는가?" |
| 확인 | 신원 확인 | 권한 확인 |
| 순서 | 먼저 수행 | 인증 후 수행 |
| 예시 | 로그인 | 관리자 페이지 접근 권한 |

### 인증 방식 ◑

| 방식 | 설명 | 장단점 |
|------|------|--------|
| 세션 기반 | 서버에 세션 저장, 세션 ID를 쿠키로 전달 | 상태 유지, 서버 메모리 사용 |
| 토큰 기반 (JWT) | 서버 상태 없음, 토큰에 정보 포함 | Stateless, 토큰 크기 큼 |
| OAuth | 제3자 인증 위임 | 소셜 로그인 등에 활용 |

### JWT (JSON Web Token) ◑

| 구성 | 설명 |
|------|------|
| Header | 알고리즘, 토큰 타입 |
| Payload | 클레임 (사용자 정보) |
| Signature | 위변조 방지 서명 |

```
Header.Payload.Signature (Base64 인코딩, . 으로 구분)
```

**주의**: Payload는 암호화되지 않음 (민감 정보 포함 금지)

### 다중 요소 인증 (MFA) ◑

두 가지 이상의 인증 요소를 조합하여 보안 강화

| 요소 | 설명 | 예시 |
|------|------|------|
| 지식 (Something you know) | 알고 있는 것 | 비밀번호, PIN |
| 소유 (Something you have) | 가지고 있는 것 | OTP, 스마트폰 |
| 특성 (Something you are) | 본인의 특성 | 지문, 얼굴 인식 |

---

## 4. 웹 보안 (OWASP Top 10) ◑

OWASP (Open Web Application Security Project)는 웹 애플리케이션 보안 취약점을 정리한 목록이다.

### 주요 취약점과 대응 ◑

| 취약점 | 설명 | 대응 |
|--------|------|------|
| **Injection** | SQL, OS 명령어 삽입 | Prepared Statement, 입력 검증 |
| **Broken Authentication** | 인증/세션 관리 결함 | MFA, 강력한 비밀번호 정책 |
| **XSS** | 악성 스크립트 삽입 | 입력값 이스케이프, CSP |
| **CSRF** | 사용자 권한 도용 요청 | CSRF 토큰, SameSite 쿠키 |
| **SSRF** | 서버가 악의적 요청 수행 | 화이트리스트, URL 검증 |
| **Security Misconfiguration** | 잘못된 보안 설정 | 기본 계정 변경, 불필요 기능 비활성화 |

### ⭕ SQL Injection이란? 방어 방법은?

악의적인 SQL 쿼리를 입력하여 데이터베이스를 조작하는 공격이다.

**공격 예시**
```sql
-- 입력: ' OR '1'='1
SELECT * FROM users WHERE id='' OR '1'='1'  -- 항상 참
```

**방어 방법**
1. **Prepared Statement** (파라미터화된 쿼리)
2. 입력값 검증 및 이스케이프
3. 최소 권한 DB 계정 사용
4. 에러 메시지 숨기기

### ⭕ XSS (Cross-Site Scripting)란?

웹 페이지에 악성 스크립트를 삽입하여 사용자 브라우저에서 실행시키는 공격이다.

| 유형 | 설명 |
|------|------|
| Stored XSS | 서버에 스크립트 저장 (게시판 등) |
| Reflected XSS | URL 파라미터로 전달된 스크립트 반사 |
| DOM-based XSS | 클라이언트 측 DOM 조작 |

**방어 방법**
- 출력 시 HTML 이스케이프
- Content Security Policy (CSP) 적용
- HttpOnly 쿠키 사용

### ⭕ CSRF (Cross-Site Request Forgery)란?

사용자가 인증된 상태에서 공격자가 의도한 요청을 실행하게 만드는 공격이다.

**방어 방법**
- CSRF 토큰 사용
- SameSite 쿠키 속성
- Referer 헤더 검증

---

## 5. 네트워크 보안 ◑

### HTTPS와 TLS ◑

| 특징 | 설명 |
|------|------|
| HTTPS | HTTP + TLS/SSL |
| TLS | 전송 계층 보안 프로토콜 |
| 기능 | 기밀성, 무결성, 인증 |

**TLS 핸드셰이크 과정**
1. 클라이언트 → 서버: 지원하는 암호화 방식 전송
2. 서버 → 클라이언트: 선택된 암호화 방식 + 인증서 전송
3. 클라이언트: 인증서 검증, 대칭키 생성, 서버 공개키로 암호화하여 전송
4. 양측: 대칭키로 암호화 통신 시작

### 방화벽 (Firewall) ◑

네트워크 트래픽을 모니터링하고 필터링하는 보안 시스템이다.

| 유형 | 설명 |
|------|------|
| 패킷 필터링 | IP, 포트 기반 필터링 |
| 상태 검사 (Stateful) | 연결 상태 추적 |
| 애플리케이션 레벨 | L7 프로토콜 검사 (WAF) |

### VPN (Virtual Private Network) ◑

공용 네트워크에서 암호화된 터널을 통해 안전한 통신을 제공한다.

---

## 6. 비밀번호 보안 ◑

### 안전한 비밀번호 저장 ◑

1. **해시** 사용 (암호화가 아님)
2. **솔트(Salt)** 추가: 레인보우 테이블 공격 방지
3. **느린 해시 함수** 사용: bcrypt, Argon2, scrypt

```
저장값 = hash(password + salt)
```

### 공격 유형과 방어 ◑

| 공격 | 설명 | 방어 |
|------|------|------|
| 브루트 포스 | 모든 조합 시도 | 계정 잠금, Rate Limiting |
| 딕셔너리 공격 | 자주 사용되는 단어 시도 | 복잡한 비밀번호 정책 |
| 레인보우 테이블 | 미리 계산된 해시 테이블 | 솔트 사용 |
| 크리덴셜 스터핑 | 유출된 자격 증명 재사용 | MFA, 비밀번호 재사용 금지 |

---

## 7. 보안 원칙 ◑

### CIA Triad ◑

| 원칙 | 설명 |
|------|------|
| **C**onfidentiality (기밀성) | 인가된 사용자만 접근 |
| **I**ntegrity (무결성) | 데이터 변조 방지 |
| **A**vailability (가용성) | 필요 시 접근 가능 |

### 최소 권한 원칙 (Principle of Least Privilege) ◑

사용자/프로세스에게 필요한 최소한의 권한만 부여한다.

### 심층 방어 (Defense in Depth) ◑

여러 계층의 보안 장치를 배치하여 단일 실패 지점을 방지한다.

---

## 면접 대비 체크리스트 ◑

- [ ] 대칭키 vs 비대칭키 암호화 차이
- [ ] 해시와 암호화의 차이
- [ ] 인증(Authentication) vs 인가(Authorization)
- [ ] JWT 구조와 특징
- [ ] SQL Injection, XSS, CSRF 공격과 방어
- [ ] HTTPS/TLS 동작 원리
- [ ] 비밀번호 안전한 저장 방법 (해시 + 솔트)

